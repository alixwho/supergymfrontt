<ion-content class="login-content">
  <div class="login-container">
    <img src="assets/gy.png" alt="Super Gym" class="logo" />

    <h2 class="app-title">Super Gym</h2>
    <p class="subtitle">Tu entrenador personal</p>

    <form [formGroup]="loginForm" (ngSubmit)="ingresar()">


      <ion-item lines="none" class="input-item">
        <ion-input
          formControlName="numero_usuario"
          label="Número de usuario"
          labelPlacement="floating"
          placeholder="Ej. usuario123"
        ></ion-input>
      </ion-item>

      @if (numero_usuario.invalid && (numero_usuario.dirty || numero_usuario.touched)) {
        <ion-text color="danger">
          @if (numero_usuario.errors?.['required']) {
            <p>El número de usuario es obligatorio</p>
          }
        </ion-text>
      }

      <ion-item lines="none" class="input-item">
        <ion-input
          [type]="mostrarPassword ? 'text' : 'password'"
          formControlName="password"
          label="Contraseña"
          labelPlacement="floating"
          placeholder="Ingresa tu contraseña"
        ></ion-input>
        <ion-icon
          slot="end"
          [name]="mostrarPassword ? 'eye-off' : 'eye'"
          class="icono-ojo"
          (click)="mostrarPassword = !mostrarPassword"
        ></ion-icon>
      </ion-item>

      @if (password.invalid && (password.dirty || password.touched)) {
        <ion-text color="danger">
          @if (password.errors?.['required']) {
            <p>La contraseña es obligatoria</p>
          }
          @if (password.errors?.['minlength']) {
            <p>Debe tener al menos 6 caracteres</p>
          }
        </ion-text>
      }

      <ion-text color="danger" *ngIf="mensajeError">
        <p>{{ mensajeError }}</p>
      </ion-text>

      <ion-button
        expand="block"
        class="login-button"
        shape="round"
        type="submit"
        [disabled]="cargando || loginForm.invalid"
      >
        {{ cargando ? 'Iniciando sesión...' : 'Iniciar sesión' }}
      </ion-button>
    </form>

    <br />

    <p class="forgot-link" (click)="irARecuperar()">
      ¿Olvidaste tu contraseña?
    </p>

    <br />

    <p class="register-text">
      ¿No tienes una cuenta?
      <span class="register-link" (click)="irARegistro()">Regístrate</span>
    </p>
  </div>
</ion-content>
